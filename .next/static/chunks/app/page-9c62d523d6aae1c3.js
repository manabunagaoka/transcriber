(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8105:function(e,t,a){Promise.resolve().then(a.bind(a,5564))},5564:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(7437),n=a(2265),s=a(7865);let l=(0,s.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),c=(0,s.Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),i=(0,s.Z)("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),o=(0,s.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),d=(0,s.Z)("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),u=(0,s.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),h=(0,s.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),m=(0,s.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),x=(0,s.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),v=(0,s.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),p=(0,s.Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),g=e=>"".concat(Math.floor(e/1e3/60/60).toString().padStart(2,"0"),":").concat(Math.floor(e/1e3/60%60).toString().padStart(2,"0"),":").concat(Math.floor(e/1e3%60).toString().padStart(2,"0")),y=()=>(0,r.jsx)("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map(e=>(0,r.jsx)("div",{className:"w-3 bg-blue-500 rounded-full animate-pulse",style:{height:40*Math.random()+10,animationDelay:"".concat(.1*e,"s")}},e))});function f(){let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)([]),[f,b]=(0,n.useState)(null),[j,w]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),[S,R]=(0,n.useState)(Date.now()),[C,M]=(0,n.useState)(!1),[z,L]=(0,n.useState)(!1),[O,E]=(0,n.useState)(null),[_,A]=(0,n.useState)(0),[I,U]=(0,n.useState)(0),[F,D]=(0,n.useState)(!1),[V,Z]=(0,n.useState)(1),[T,H]=(0,n.useState)([]),[P,Q]=(0,n.useState)({videoQuality:"high",format:"webm",withAudio:!0,audioFormat:"wav",autoSave:!1}),q=(0,n.useRef)(null),$=(0,n.useRef)(null),W=(0,n.useRef)(null),B=(0,n.useRef)([]),Y=(0,n.useRef)(null),J=(0,n.useRef)(null),G=(0,n.useRef)(),K=(0,n.useRef)(),X=(0,n.useRef)(),ee=(0,n.useRef)(),et=async()=>{if("performance"in window&&"memory"in performance){let e=performance.memory,t=e.usedJSHeapSize/e.jsHeapSizeLimit;U(t),t>.8&&(D(!0),await ea())}},ea=async()=>{if(B.current.length>0){let e="video"===f?"mp4"===P.format?"video/mp4":"video/webm":"mp3"===P.audioFormat?"audio/mpeg":"audio/wav",t=new Blob(B.current,{type:e});if(H(e=>[...e,{number:V,blob:t,timestamp:Date.now()}]),B.current=[],Z(e=>e+1),P.autoSave){let e=URL.createObjectURL(t),a=document.createElement("a");a.href=e,a.download="recording-chunk-".concat(V,"-").concat(Date.now(),".").concat("video"===f?P.format:P.audioFormat),a.click(),URL.revokeObjectURL(e)}}},er=e=>{C?(E(e),L(!0)):b(e)},en=()=>{b(O),E(null),L(!1),M(!1)},es=async()=>{el(),await ec(),M(!1)},el=()=>{if(0===a.length)return;let e=a.map(e=>"[".concat(new Date(e.timestamp).toISOString(),"] ").concat(e.text)).join("\n"),t=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="transcription-".concat(Date.now(),".txt"),n.click(),URL.revokeObjectURL(r)},ec=async()=>{if(0===B.current.length&&0===T.length)return;let e=[...T.map(e=>e.blob),...B.current];if(0===e.length)return;let t="video"===f?"mp4"===P.format?"video/mp4":"video/webm":"mp3"===P.audioFormat?"audio/mpeg":"audio/wav",a=new Blob(e,{type:t}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="recording-".concat(Date.now(),".").concat("video"===f?P.format:P.audioFormat),n.click(),URL.revokeObjectURL(r)},ei=()=>{let e={audio:P.withAudio};return"video"===f&&(e.video={width:"high"===P.videoQuality?1920:"medium"===P.videoQuality?1280:640,height:"high"===P.videoQuality?1080:"medium"===P.videoQuality?720:480}),e},eo=async()=>{try{var a;let r=await navigator.mediaDevices.getUserMedia(ei());"video"===f&&q.current&&(q.current.srcObject=r);let n="video"===f?"mp4"===P.format?"video/mp4":"video/webm":"mp3"===P.audioFormat?"audio/mpeg":"audio/wav";W.current=new MediaRecorder(r,{mimeType:MediaRecorder.isTypeSupported(n)?n:""}),B.current=[],W.current.ondataavailable=e=>{e.data.size>0&&B.current.push(e.data)},W.current.start(),null===(a=$.current)||void 0===a||a.start(),G.current=setInterval(()=>{A(e=>e>=144e5?(ed(),e):e+1e3)},1e3),K.current=setInterval(et,1e4),ee.current=setInterval(async()=>{if(W.current&&e){W.current.stop(),await ea();let e=await navigator.mediaDevices.getUserMedia(ei());W.current=new MediaRecorder(e),W.current.start()}},3e5),X.current=setInterval(async()=>{await ea()},6e5),t(!0)}catch(e){console.error("Error starting recording:",e),alert("Error starting recording. Please check your media permissions.")}},ed=async()=>{var e,a,r;G.current&&clearInterval(G.current),K.current&&clearInterval(K.current),ee.current&&clearInterval(ee.current),X.current&&clearInterval(X.current),await ea(),null===(e=W.current)||void 0===e||e.stop(),(null===(a=q.current)||void 0===a?void 0:a.srcObject)&&(q.current.srcObject.getTracks().forEach(e=>e.stop()),q.current.srcObject=null),null===(r=$.current)||void 0===r||r.stop(),t(!1),A(0)};return(0,n.useEffect)(()=>{if("SpeechRecognition"in window||"webkitSpeechRecognition"in window){let e=window.SpeechRecognition||window.webkitSpeechRecognition;$.current=new e,$.current.continuous=!0,$.current.interimResults=!0,$.current.onresult=e=>{let t=e.results[e.results.length-1],a=Date.now(),r=a-S;t.isFinal&&(s(e=>{if(0===e.length||r>2e3||/[.!?]$/.test(e[e.length-1].text))return[...e,{text:t[0].transcript,timestamp:a}];let n=[...e],s=n.length-1;return n[s]={...n[s],text:n[s].text+" "+t[0].transcript},n}),R(a))}}},[S]),(0,n.useEffect)(()=>{let e=e=>{Y.current&&!Y.current.contains(e.target)&&w(!1),J.current&&!J.current.contains(e.target)&&N(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.useEffect)(()=>{M(a.length>0||B.current.length>0||T.length>0)},[a,T]),(0,n.useEffect)(()=>()=>{G.current&&clearInterval(G.current),K.current&&clearInterval(K.current),ee.current&&clearInterval(ee.current),X.current&&clearInterval(X.current)},[]),(0,r.jsx)("div",{className:"min-h-screen flex flex-col bg-gray-900 text-white",children:(0,r.jsxs)("div",{className:"p-4",children:[z&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-gray-800 p-6 rounded-lg max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,r.jsx)(l,{className:"text-yellow-400"}),(0,r.jsx)("h3",{className:"text-xl font-semibold",children:"Unsaved Content"})]}),(0,r.jsx)("p",{className:"mb-6",children:"You have unsaved recording or transcription. Would you like to save before switching modes?"}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,r.jsx)("button",{onClick:async()=>{await es(),en()},className:"px-4 py-2 bg-blue-600 rounded hover:bg-blue-700",children:"Save and Switch"}),(0,r.jsx)("button",{onClick:en,className:"px-4 py-2 bg-red-600 rounded hover:bg-red-700",children:"Discard and Switch"}),(0,r.jsx)("button",{onClick:()=>{E(null),L(!1)},className:"px-4 py-2 bg-gray-600 rounded hover:bg-gray-700",children:"Cancel"})]})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"bg-gray-800 p-1 rounded-lg flex space-x-1",children:[(0,r.jsx)("button",{onClick:()=>er("video"),className:"p-3 rounded-lg transition-colors ".concat("video"===f?"bg-blue-600":"hover:bg-gray-700"," ").concat(e?"opacity-50 cursor-not-allowed":""),disabled:e,children:(0,r.jsx)(c,{size:24,className:"text-white"})}),(0,r.jsx)("button",{onClick:()=>er("audio"),className:"p-3 rounded-lg transition-colors ".concat("audio"===f?"bg-blue-600":"hover:bg-gray-700"," ").concat(e?"opacity-50 cursor-not-allowed":""),disabled:e,children:(0,r.jsx)(i,{size:24,className:"text-white"})})]}),(0,r.jsx)("div",{className:"flex items-center text-white",children:(0,r.jsx)("span",{className:"text-xl",children:f?"".concat("video"===f?"Video":"Audio"," Mode"):"Choose Recording Mode"})})]}),f&&(0,r.jsxs)("div",{className:"flex items-center space-x-4 bg-gray-800 px-4 py-2 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(o,{size:20}),(0,r.jsx)("span",{children:g(_)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d,{size:20}),(0,r.jsx)("div",{className:"w-32 h-2 bg-gray-700 rounded-full",children:(0,r.jsx)("div",{className:"h-full rounded-full ".concat(I>.8?"bg-red-500":"bg-blue-500"),style:{width:"".concat(100*I,"%")}})})]}),V>1&&(0,r.jsxs)("span",{className:"text-gray-400",children:["Chunk ",V," | ",T.length," saved"]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("div",{className:"relative",ref:J,children:[(0,r.jsx)("button",{onClick:()=>N(!k),className:"p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",title:"Settings",children:(0,r.jsx)(u,{size:24,className:"text-white"})}),k&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-gray-800 border border-gray-700 rounded-lg shadow-lg p-4 z-50",children:[(0,r.jsx)("h3",{className:"font-semibold mb-3 text-gray-200",children:"Recording Settings"}),(0,r.jsxs)("div",{className:"space-y-3",children:["video"===f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Video Quality"}),(0,r.jsxs)("select",{value:P.videoQuality,onChange:e=>Q(t=>({...t,videoQuality:e.target.value})),className:"w-full bg-gray-700 rounded p-2",children:[(0,r.jsx)("option",{value:"high",children:"High (1080p)"}),(0,r.jsx)("option",{value:"medium",children:"Medium (720p)"}),(0,r.jsx)("option",{value:"low",children:"Low (480p)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Video Format"}),(0,r.jsxs)("select",{value:P.format,onChange:e=>Q(t=>({...t,format:e.target.value})),className:"w-full bg-gray-700 rounded p-2",children:[(0,r.jsx)("option",{value:"webm",children:"WebM"}),(0,r.jsx)("option",{value:"mp4",children:"MP4"})]})]})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm mb-1",children:"Audio Format"}),(0,r.jsxs)("select",{value:P.audioFormat,onChange:e=>Q(t=>({...t,audioFormat:e.target.value})),className:"w-full bg-gray-700 rounded p-2",children:[(0,r.jsx)("option",{value:"wav",children:"WAV"}),(0,r.jsx)("option",{value:"mp3",children:"MP3"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"autoSave",checked:P.autoSave,onChange:e=>Q(t=>({...t,autoSave:e.target.checked})),className:"rounded"}),(0,r.jsx)("label",{htmlFor:"autoSave",className:"text-sm",children:"Auto-save chunks"})]})]})]})]}),(0,r.jsxs)("div",{className:"relative",ref:Y,children:[(0,r.jsx)("button",{onClick:()=>w(!j),className:"p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",title:"Save Options",children:(0,r.jsx)(h,{size:24,className:"text-white"})}),j&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-lg py-2 z-50",children:[(0,r.jsxs)("button",{onClick:async()=>{await es(),w(!1)},className:"w-full px-4 py-2 hover:bg-gray-700 flex items-center space-x-2",children:[(0,r.jsx)(m,{size:20}),(0,r.jsx)("span",{children:"Save All"})]}),(0,r.jsxs)("button",{onClick:()=>{el(),w(!1)},className:"w-full px-4 py-2 hover:bg-gray-700 flex items-center space-x-2",children:[(0,r.jsx)(x,{size:20}),(0,r.jsx)("span",{children:"Save Text"})]}),B.current.length>0&&(0,r.jsxs)("button",{onClick:()=>{ec(),w(!1)},className:"w-full px-4 py-2 hover:bg-gray-700 flex items-center space-x-2",children:["video"===f?(0,r.jsx)(v,{size:20}):(0,r.jsx)(i,{size:20}),(0,r.jsxs)("span",{children:["Save ","video"===f?"Video":"Audio"]})]})]})]}),(0,r.jsx)("button",{onClick:()=>{var e;(!C||window.confirm("You have unsaved content. Are you sure you want to refresh?"))&&(s([]),t(!1),w(!1),N(!1),M(!1),A(0),U(0),D(!1),Z(1),H([]),(null===(e=q.current)||void 0===e?void 0:e.srcObject)&&(q.current.srcObject.getTracks().forEach(e=>e.stop()),q.current.srcObject=null),B.current=[])},className:"p-3 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors",title:"Refresh",children:(0,r.jsx)(p,{size:24,className:"text-white"})})]})]}),F&&(0,r.jsxs)("div",{className:"fixed bottom-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg flex items-center space-x-2",children:[(0,r.jsx)(l,{size:20}),(0,r.jsx)("span",{children:"High memory usage detected. Consider stopping the recording."}),(0,r.jsx)("button",{onClick:()=>D(!1),className:"ml-2 p-1 hover:bg-red-700 rounded",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"h-96 bg-gray-800 relative rounded-lg mb-4",children:["video"===f&&(0,r.jsx)("video",{ref:q,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover rounded-lg"}),"audio"===f&&(0,r.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center space-y-4",children:[(0,r.jsx)("div",{className:"text-2xl text-gray-400",children:"Audio Recording Mode"}),e&&(0,r.jsx)(y,{})]}),f&&(0,r.jsx)("button",{onClick:e?ed:eo,className:"absolute bottom-6 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-gray-900 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"".concat(e?"w-8 h-8 bg-red-600 rounded-sm":"w-12 h-12 bg-red-600 rounded-full"," transition-all duration-200")})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-200 mb-2",children:"Transcription"}),(0,r.jsx)("div",{className:"space-y-4 overflow-y-auto max-h-[45vh] bg-gray-800 rounded-lg p-4",children:0===a.length?(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"Your transcription will appear here..."}):a.map((e,t)=>(0,r.jsx)("p",{className:"text-white",children:e.text},t))})]})]})})}},622:function(e,t,a){"use strict";var r=a(2265),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,c=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(e,t,a){var r,s={},o=null,d=null;for(r in void 0!==a&&(o=""+a),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(d=t.ref),t)l.call(t,r)&&!i.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:o,ref:d,props:s,_owner:c.current}}t.Fragment=s,t.jsx=o,t.jsxs=o},7437:function(e,t,a){"use strict";e.exports=a(622)},7865:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();var l=(e,t)=>{let a=(0,r.forwardRef)(({color:a="currentColor",size:l=24,strokeWidth:c=2,absoluteStrokeWidth:i,children:o,...d},u)=>(0,r.createElement)("svg",{ref:u,...n,width:l,height:l,stroke:a,strokeWidth:i?24*Number(c)/Number(l):c,className:`lucide lucide-${s(e)}`,...d},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...(Array.isArray(o)?o:[o])||[]]));return a.displayName=`${e}`,a}}},function(e){e.O(0,[971,458,744],function(){return e(e.s=8105)}),_N_E=e.O()}]);